console.log("This is the JavaScript Object that holds all PHP Variables for use in JavaScript"),console.log(wpbooklistSearchPhpVariables),jQuery(document).ready(function(t){"use strict";var s=function(e){var c={},h=document.createElement("a");h.href=e;for(var a=h.search.substring(1).split("&"),o=0;o<a.length;o++){var r=a[o].split("=");c[r[0]]=decodeURIComponent(r[1])}return c};Array.prototype.unique=function(){for(var e=this.concat(),c=0;c<e.length;++c)for(var h=c+1;h<e.length;++h)e[c]===e[h]&&e.splice(h--,1);return e},t("#wpbooklist-search-searchterm-form").on("submit",function(){var e="",c=[],h=[],a=[],o="",r=t("#wpbooklist-search-searchterm-input").val();t("#wpbooklist-search-searchin-checkbox-checkall").prop("checked")?t(".wpbooklist-search-searchin-checkbox").each(function(){c.push(t(this).attr("data-dblibname"))}):t(".wpbooklist-search-searchin-checkbox").each(function(){t(this).prop("checked")&&c.push(t(this).attr("data-dblibname"))}),c.length<1&&t(".wpbooklist-search-searchin-checkbox").each(function(){c.push(t(this).attr("data-dblibname"))}),t(".wpbooklist-search-searchby-checkbox").each(function(){t(this).prop("checked")&&a.push(t(this).attr("data-dbfieldname"))}),a.length<1&&a.push("searchbyall"),e=-1<window.location.href.indexOf("?")?(e=window.location.href.split("?"))[0]+"?searchby=":window.location.href+"?searchby=";for(var s=a.length-1;0<=s;s--)o=o+","+a[s];","===o.charAt(0)&&(o=o.substr(1)),r="&searchterm="+r;for(var s=c.length-1;0<=s;s--)h=h+","+c[s];","===h.charAt(0)&&(h=h.substr(1)),h="&querytable="+h,window.location.href=e+o+r+h,event.preventDefault?event.preventDefault():event.returnValue=!1}),t(document).on("change","#wpbooklist-search-searchin-checkbox-checkall",function(e){t(this).prop("checked")?t(".wpbooklist-search-searchin-checkbox").each(function(){t(this).prop("checked",!0)}):t(".wpbooklist-search-searchin-checkbox").each(function(){t(this).removeAttr("checked")})}),t(document).on("change","#wpbooklist-search-searchby-checkbox-checkall",function(e){t(this).prop("checked")?t(".wpbooklist-search-searchby-checkbox").each(function(){t(this).prop("checked",!0)}):t(".wpbooklist-search-searchby-checkbox").each(function(){t(this).removeAttr("checked")})}),t(document).on("change",".wpbooklist-search-searchin-checkbox",function(e){t(this).prop("checked")||t("#wpbooklist-search-searchin-checkbox-checkall").removeAttr("checked")}),t(document).on("change",".wpbooklist-search-searchby-checkbox",function(e){t(this).prop("checked")||t("#wpbooklist-search-searchby-checkbox-checkall").removeAttr("checked")}),t("#wpbooklist-search-searchterm-refined-form").on("submit",function(){var e="",c=[],h=[],a=[],o=[];t("#wpbooklist-search-searchterm-input").val(),t("#wpbooklist-search-searchin-checkbox-checkall").prop("checked")?t(".wpbooklist-search-searchin-checkbox").each(function(){c.push(t(this).attr("data-dblibname"))}):t(".wpbooklist-search-searchin-checkbox").each(function(){t(this).prop("checked")&&c.push(t(this).attr("data-dblibname"))}),c.length<1&&c.push(wpbooklistSearchPhpVariables.SEARCH_SPECIAL_PREFIX+"wpbooklist_jre_saved_book_log"),t(".wpbooklist-search-searchby-checkbox").each(function(){t(this).prop("checked")&&a.push(t(this).attr("data-dbfieldname"))}),""!==(e=s(window.location.href)).searchby&null!==e.searchby&&void 0!==e.searchby&&(-1<e.searchby.includes(",")?(o=e.searchby.split(","),a=a.concat(o).unique()):-1<a.indexOf(e.searchby)&&a.push(e.searchby)),""!==e.searchin&null!==e.searchin&&void 0!==e.searchin&&(-1<e.searchin.includes(",")?(h=e.searchin.split(","),c=c.concat(h).unique()):-1<c.indexOf(e.searchin)&&c.push(e.searchin)),console.log(c),console.log(a),event.preventDefault?event.preventDefault():event.returnValue=!1}),function(){var e=[],c=[],h=[],a=!0,o=!0;if(-1<window.location.href.indexOf("searchby=")&&-1<window.location.href.indexOf("searchterm=")&&-1<window.location.href.indexOf("querytable=")){if(""!==(h=s(window.location.href)).offset&null!==h.offset&&void 0!==h.offset&&0<h.offset?t("#wpbooklist-search-pagination-middle-div-select").val(h.offset):t("#wpbooklist-search-pagination-middle-div-select").val(0),t("#wpbooklist-search-searchterm-input").val(h.searchterm),""!==h.querytable&null!==h.querytable&&void 0!==h.querytable){-1<h.querytable.includes(",")?e=h.querytable.split(","):"alllibraries"===h.querytable?e.push("alllibraries"):-1<e.indexOf(h.querytable)&&e.push(h.querytable);for(var r=e.length-1;0<=r;r--)console.log(e[r]),"alllibraries"===e[r]?(t("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0),t("#wpbooklist-search-searchin-checkbox-checkall").trigger("change")):t('input[name="'+e[r]+'"]').prop("checked",!0);t(".wpbooklist-search-searchin-checkbox").each(function(){t(this).prop("checked")||(o=!1)}),o&&t("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0)}if(""!==h.searchby&null!==h.searchby&&void 0!==h.searchby){-1<h.searchby.includes(",")?c=h.searchby.split(","):"searchbyall"===h.searchby?c.push("searchbyall"):-1<c.indexOf(h.searchby)&&c.push(h.searchby);for(var r=c.length-1;0<=r;r--)"searchbyall"===c[r]?(t("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0),t("#wpbooklist-search-searchby-checkbox-checkall").trigger("change")):t('input[name="hide-library-display-form-'+c[r]+'"]').prop("checked",!0);t(".wpbooklist-search-searchby-checkbox").each(function(){t(this).prop("checked")||(a=!1)}),a&&t("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0)}}}()});