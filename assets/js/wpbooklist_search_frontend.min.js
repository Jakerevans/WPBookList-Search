console.log("This is the JavaScript Object that holds all PHP Variables for use in JavaScript"),console.log(wpbooklistSearchPhpVariables),jQuery(document).ready(function(s){"use strict";Array.prototype.unique=function(){for(var e=this.concat(),c=0;c<e.length;++c)for(var r=c+1;r<e.length;++r)e[c]===e[r]&&e.splice(r--,1);return e},s("#wpbooklist-search-searchterm-form").on("submit",function(){var e="",c=[],r=[],t=[],o="",a=s("#wpbooklist-search-searchterm-input").val();s("#wpbooklist-search-searchin-checkbox-checkall").prop("checked")?s(".wpbooklist-search-searchin-checkbox").each(function(){c.push(s(this).attr("data-dblibname"))}):s(".wpbooklist-search-searchin-checkbox").each(function(){s(this).prop("checked")&&c.push(s(this).attr("data-dblibname"))}),c.length<1&&s(".wpbooklist-search-searchin-checkbox").each(function(){c.push(s(this).attr("data-dblibname"))}),s(".wpbooklist-search-searchby-checkbox").each(function(){s(this).prop("checked")&&t.push(s(this).attr("data-dbfieldname"))}),t.length<1&&t.push("searchbyall"),e=-1<window.location.href.indexOf("?")?(e=window.location.href.split("?"))[0]+"?searchby=":window.location.href+"?searchby=";for(var h=t.length-1;0<=h;h--)o=o+","+t[h];","===o.charAt(0)&&(o=o.substr(1)),a="&searchterm="+a;for(var h=c.length-1;0<=h;h--)r=r+","+c[h];","===r.charAt(0)&&(r=r.substr(1)),r="&querytable="+r,window.location.href=e+o+a+r,event.preventDefault?event.preventDefault():event.returnValue=!1}),s(document).on("change","#wpbooklist-search-searchin-checkbox-checkall",function(e){s(this).prop("checked")?s(".wpbooklist-search-searchin-checkbox").each(function(){s(this).prop("checked",!0)}):s(".wpbooklist-search-searchin-checkbox").each(function(){s(this).removeAttr("checked")})}),s(document).on("change","#wpbooklist-search-searchby-checkbox-checkall",function(e){s(this).prop("checked")?s(".wpbooklist-search-searchby-checkbox").each(function(){s(this).prop("checked",!0)}):s(".wpbooklist-search-searchby-checkbox").each(function(){s(this).removeAttr("checked")})}),s(document).on("change",".wpbooklist-search-searchin-checkbox",function(e){s(this).prop("checked")||s("#wpbooklist-search-searchin-checkbox-checkall").removeAttr("checked")}),s(document).on("change",".wpbooklist-search-searchby-checkbox",function(e){s(this).prop("checked")||s("#wpbooklist-search-searchby-checkbox-checkall").removeAttr("checked")}),s("#wpbooklist-search-searchterm-refined-form").on("submit",function(){var e=[],c=[],r=[],t=[],o="",a="&filterterms=",h="&filtervalues=";s(".wpbooklist-search-refineby-checkbox").each(function(){s(this).prop("checked")&&(e.push(s(this).attr("data-dbfieldname")),c.push("1"))}),s(".wpbooklist-search-refineby-dropdown").each(function(){null!==s(this).val()&&(r.push(s(this).attr("data-dbfieldname")),t.push(s(this).val()))}),console.log(e),console.log(c),console.log(r),console.log(t);for(var l=e.length-1;0<=l;l--)a=a+e[l]+",",h=h+","+c[l]+",";for(var l=r.length-1;0<=l;l--)a=a+r[l]+",",h=h+","+t[l]+",";null!==(o=s("#wpbooklist-search-refineby-rating").val())&&(a+="rating",h=h+","+o),a=a.replace(/,,/g,","),h=h.replace(/,,/g,","),-1<a.indexOf("&filterterms=,")&&(a=a.replace("&filterterms=,","&filterterms=")),-1<h.indexOf("&filtervalues=,")&&(h=h.replace("&filtervalues=,","&filtervalues=")),","===a[a.length-1]&&(a=a.substring(0,a.length-1)),","===h[h.length-1]&&(h=h.substring(0,h.length-1)),window.location.href=window.location.href+a+"&"+h,event.preventDefault?event.preventDefault():event.returnValue=!1}),function(){var e=[],c=[],r=[],t=!0,o=!0,a=[],h=[];if(-1<window.location.href.indexOf("searchby=")&&-1<window.location.href.indexOf("searchterm=")&&-1<window.location.href.indexOf("querytable=")){if(r=function(e){var c={},r=document.createElement("a");r.href=e;for(var t=r.search.substring(1).split("&"),o=0;o<t.length;o++){var a=t[o].split("=");c[a[0]]=decodeURIComponent(a[1])}return c}(window.location.href),console.log(r),""!==r.offset&null!==r.offset&&void 0!==r.offset&&0<r.offset?s("#wpbooklist-search-pagination-middle-div-select").val(r.offset):s("#wpbooklist-search-pagination-middle-div-select").val(0),s("#wpbooklist-search-searchterm-input").val(r.searchterm),""!==r.filterterms&null!==r.filterterms&&void 0!==r.filterterms&&""!==r.filtervalues&null!==r.filtervalues&&void 0!==r.filtervalues){-1<r.filterterms.includes(",")?a=r.filterterms.split(","):a.push(r.filterterms),-1<r.filtervalues.includes(",")?h=r.filtervalues.split(","):h.push(r.filtervalues);for(var l=a.length-1;0<=l;l--)s('input[name="hide-library-display-form-'+a[l]+'"]').prop("checked",!0),s('select[name="hide-library-display-form-'+a[l]+'"]').val(h[l])}if(console.log(a),-1<a.indexOf("rating")&&s("#wpbooklist-search-refineby-rating").val(h[h.length-1]),""!==r.querytable&null!==r.querytable&&void 0!==r.querytable){-1<r.querytable.includes(",")?e=r.querytable.split(","):"alllibraries"===r.querytable?e.push("alllibraries"):-1<e.indexOf(r.querytable)&&e.push(r.querytable);for(var l=e.length-1;0<=l;l--)console.log(e[l]),"alllibraries"===e[l]?(s("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0),s("#wpbooklist-search-searchin-checkbox-checkall").trigger("change")):s('input[name="'+e[l]+'"]').prop("checked",!0);s(".wpbooklist-search-searchin-checkbox").each(function(){s(this).prop("checked")||(o=!1)}),o&&s("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0)}if(""!==r.searchby&null!==r.searchby&&void 0!==r.searchby){-1<r.searchby.includes(",")?c=r.searchby.split(","):"searchbyall"===r.searchby?c.push("searchbyall"):-1<c.indexOf(r.searchby)&&c.push(r.searchby);for(var l=c.length-1;0<=l;l--)"searchbyall"===c[l]?(s("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0),s("#wpbooklist-search-searchby-checkbox-checkall").trigger("change")):s('input[name="hide-library-display-form-'+c[l]+'"]').prop("checked",!0);s(".wpbooklist-search-searchby-checkbox").each(function(){s(this).prop("checked")||(t=!1)}),t&&s("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0)}}}()});