console.log("This is the Search JavaScript Object that holds all PHP Variables for use in JavaScript"),console.log(wpbooklistSearchPhpVariables),jQuery(document).ready(function(u){"use strict";Array.prototype.unique=function(){for(var e=this.concat(),r=0;r<e.length;++r)for(var a=r+1;a<e.length;++a)e[r]===e[a]&&e.splice(a--,1);return e},u("#wpbooklist-search-searchterm-form").on("submit",function(){var e="",r=[],a=[],c=[],o="",t=u("#wpbooklist-search-searchterm-input").val();u("#wpbooklist-search-searchin-checkbox-checkall").prop("checked")?u(".wpbooklist-search-searchin-checkbox").each(function(){r.push(u(this).attr("data-dblibname"))}):u(".wpbooklist-search-searchin-checkbox").each(function(){u(this).prop("checked")&&r.push(u(this).attr("data-dblibname"))}),r.length<1&&u(".wpbooklist-search-searchin-checkbox").each(function(){r.push(u(this).attr("data-dblibname"))}),u(".wpbooklist-search-searchby-checkbox").each(function(){u(this).prop("checked")&&c.push(u(this).attr("data-dbfieldname"))}),c.length<1&&c.push("searchbyall"),e=-1<window.location.href.indexOf("?")?(e=window.location.href.split("?"))[0]+"?searchby=":window.location.href+"?searchby=";for(var l=c.length-1;0<=l;l--)o=o+","+c[l];","===o.charAt(0)&&(o=o.substr(1)),t="&searchterm="+t;for(var l=r.length-1;0<=l;l--)a=a+","+r[l];","===a.charAt(0)&&(a=a.substr(1)),a="&querytable="+a,window.location.href=e+o+t+a,event.preventDefault?event.preventDefault():event.returnValue=!1}),u(document).on("change","#wpbooklist-search-searchin-checkbox-checkall",function(e){u(this).prop("checked")?u(".wpbooklist-search-searchin-checkbox").each(function(){u(this).prop("checked",!0)}):u(".wpbooklist-search-searchin-checkbox").each(function(){u(this).removeAttr("checked")})}),u(document).on("change","#wpbooklist-search-searchby-checkbox-checkall",function(e){u(this).prop("checked")?u(".wpbooklist-search-searchby-checkbox").each(function(){u(this).prop("checked",!0)}):u(".wpbooklist-search-searchby-checkbox").each(function(){u(this).removeAttr("checked")})}),u(document).on("change",".wpbooklist-search-searchin-checkbox",function(e){u(this).prop("checked")||u("#wpbooklist-search-searchin-checkbox-checkall").removeAttr("checked")}),u(document).on("change",".wpbooklist-search-searchby-checkbox",function(e){u(this).prop("checked")||u("#wpbooklist-search-searchby-checkbox-checkall").removeAttr("checked")}),u("#wpbooklist-search-searchterm-refined-form").on("submit",function(){var e=[],r=[],a=[],c=[],o="",t="",l="",i="",s="",h="",n="",b="&filterterms=",p="&filtervalues=";u(".wpbooklist-search-refineby-checkbox").each(function(){u(this).prop("checked")&&(e.push(u(this).attr("data-dbfieldname")),r.push("1"))}),u(".wpbooklist-search-refineby-dropdown").each(function(){null!==u(this).val()&&(a.push(u(this).attr("data-dbfieldname")),c.push(u(this).val()))}),console.log(e),console.log(r),console.log(a),console.log(c);for(var f=e.length-1;0<=f;f--)b=b+e[f]+",",p=p+","+r[f]+",";for(var f=a.length-1;0<=f;f--)b=b+a[f]+",",p=p+","+c[f]+",";null!==(o=u("#wpbooklist-search-refineby-rating").val())&&(b+=",rating",p=p+","+o),null!==(t=u("#wpbooklist-search-refineby-format").val())&&(b+=",format",p=p+","+t),null!==(s=u("#wpbooklist-search-refineby-pubyear-year").val())&&(n=u("#wpbooklist-search-refineby-pubyear-word").val(),b=b+",pub_year_"+n,p=p+","+s),null!==(h=u("#wpbooklist-search-refineby-language").val())&&""!==h&&(b+=",language",p=p+","+h),null!==(l=u("#wpbooklist-search-refineby-genre").val())&&""!==l&&(b+=",genres",p=p+","+l),null!==(i=u("#wpbooklist-search-refineby-subgenre").val())&&""!==i&&(b+=",subgenre",p=p+","+i),b=b.replace(/,,/g,","),p=p.replace(/,,/g,","),-1<b.indexOf("&filterterms=,")&&(b=b.replace("&filterterms=,","&filterterms=")),-1<p.indexOf("&filtervalues=,")&&(p=p.replace("&filtervalues=,","&filtervalues=")),","===b[b.length-1]&&(b=b.substring(0,b.length-1)),","===p[p.length-1]&&(p=p.substring(0,p.length-1)),window.location.href=window.location.href+b+"&"+p,event.preventDefault?event.preventDefault():event.returnValue=!1}),function(){var e=[],r=[],a=[],c=!0,o=!0,t=[],l=[],i=[];if(-1<window.location.href.indexOf("searchby")&&-1<window.location.href.indexOf("searchterm")&&-1<window.location.href.indexOf("querytable")){if(a=function(e){var r={},a=document.createElement("a");a.href=e;for(var c=a.search.substring(1).split("&"),o=0;o<c.length;o++){var t=c[o].split("=");r[t[0]]=decodeURIComponent(t[1])}return r}(window.location.href),console.log(a),""!==a.offset&null!==a.offset&&void 0!==a.offset&&0<a.offset?u("#wpbooklist-search-pagination-middle-div-select").val(a.offset):u("#wpbooklist-search-pagination-middle-div-select").val(0),"undefined"!==a.searchterm&&u("#wpbooklist-search-searchterm-input").val(a.searchterm),""!==a.filterterms&null!==a.filterterms&&void 0!==a.filterterms&&""!==a.filtervalues&null!==a.filtervalues&&void 0!==a.filtervalues){-1<a.filterterms.includes(",")?t=a.filterterms.split(","):t.push(a.filterterms),-1<a.filtervalues.includes(",")?l=a.filtervalues.split(","):l.push(a.filtervalues);for(var s=t.length-1;0<=s;s--)u('input[name="hide-library-display-form-'+t[s]+'"]').prop("checked",!0),u('select[name="hide-library-display-form-'+t[s]+'"]').val(l[s])}if(-1<t.indexOf("rating"))for(var s=0;s<t.length;s++)"rating"===t[s]&&u("#wpbooklist-search-refineby-rating").val(l[s]);if(-1<t.indexOf("format"))for(var s=0;s<t.length;s++)"format"===t[s]&&u("#wpbooklist-search-refineby-format").val(l[s]);if(-1<t.indexOf("language"))for(var s=0;s<t.length;s++)"language"===t[s]&&u("#wpbooklist-search-refineby-language").val(l[s]);if(-1<t.indexOf("genres"))for(var s=0;s<t.length;s++)"genres"===t[s]&&u("#wpbooklist-search-refineby-genre").val(l[s]);if(-1<t.indexOf("subgenre"))for(var s=0;s<t.length;s++)"subgenre"===t[s]&&u("#wpbooklist-search-refineby-subgenre").val(l[s]);if(-1<t.indexOf("pub_year_"+wpbooklistPhpVariables.trans661)||-1<t.indexOf("pub_year_"+wpbooklistPhpVariables.trans662)||-1<t.indexOf("pub_year_"+wpbooklistPhpVariables.trans663)){console.log("in2!");for(var s=0;s<t.length;s++)-1<t[s].indexOf("pub_year_")&&(console.log("in!"),i=t[s].split("_"),u("#wpbooklist-search-refineby-pubyear-word").val(i[2]),u("#wpbooklist-search-refineby-pubyear-year").val(l[s]))}if(""!==a.querytable&null!==a.querytable&&void 0!==a.querytable){-1<a.querytable.includes(",")?e=a.querytable.split(","):"alllibraries"===a.querytable?e.push("alllibraries"):-1<e.indexOf(a.querytable)&&e.push(a.querytable);for(var s=e.length-1;0<=s;s--)console.log(e[s]),"alllibraries"===e[s]?(u("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0),u("#wpbooklist-search-searchin-checkbox-checkall").trigger("change")):u('input[name="'+e[s]+'"]').prop("checked",!0);u(".wpbooklist-search-searchin-checkbox").each(function(){u(this).prop("checked")||(o=!1)}),o&&u("#wpbooklist-search-searchin-checkbox-checkall").prop("checked",!0)}if(""!==a.searchby&null!==a.searchby&&void 0!==a.searchby){-1<a.searchby.includes(",")?r=a.searchby.split(","):"searchbyall"===a.searchby?r.push("searchbyall"):-1<r.indexOf(a.searchby)&&r.push(a.searchby);for(var s=r.length-1;0<=s;s--)"searchbyall"===r[s]?(u("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0),u("#wpbooklist-search-searchby-checkbox-checkall").trigger("change")):u('input[name="hide-library-display-form-'+r[s]+'"]').prop("checked",!0);u(".wpbooklist-search-searchby-checkbox").each(function(){u(this).prop("checked")||(c=!1)}),c&&u("#wpbooklist-search-searchby-checkbox-checkall").prop("checked",!0)}}}()});